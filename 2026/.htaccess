# Enable mod_expires and mod_headers if available
<IfModule mod_expires.c>
  ExpiresActive On

  # Default: no caching unless specified
  ExpiresDefault "access plus 0 seconds"

  # HTML and PHP should always be fresh
  ExpiresByType text/html "access plus 0 seconds"
  ExpiresByType application/xhtml+xml "access plus 0 seconds"

  # CSS and JS: cache 1 day, but revalidate
  ExpiresByType text/css "access plus 1 day"
  ExpiresByType application/javascript "access plus 1 day"
  ExpiresByType text/javascript "access plus 1 day"

  # Images and fonts: cache 1 month
  ExpiresByType image/png "access plus 1 month"
  ExpiresByType image/jpg "access plus 1 month"
  ExpiresByType image/jpeg "access plus 1 month"
  ExpiresByType image/gif "access plus 1 month"
  ExpiresByType image/svg+xml "access plus 1 month"
  ExpiresByType font/woff "access plus 1 month"
  ExpiresByType font/woff2 "access plus 1 month"
</IfModule>

<IfModule mod_headers.c>
  # Force browsers to revalidate cached files
  <FilesMatch "\.(css|js)$">
    Header set Cache-Control "max-age=86400, must-revalidate"
  </FilesMatch>

  # Images and fonts: long cache but still revalidated
  <FilesMatch "\.(png|jpe?g|gif|svg|woff2?)$">
    Header set Cache-Control "max-age=2592000, must-revalidate"
  </FilesMatch>

  # HTML/PHP: no caching at all
  <FilesMatch "\.(html|php)$">
    Header set Cache-Control "no-store, no-cache, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires "0"
  </FilesMatch>
</IfModule>

# Optional: disable ETag (some CDNs ignore this)
FileETag None
